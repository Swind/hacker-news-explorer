---
story_id: 46809708
hn_url: https://news.ycombinator.com/item?id=46809708
title: "AGENTS.md outperforms skills in our agent evals"
verdict: technical
created_at: 2026-01-30T06:24:02
---

# AGENTS.md 在 Vercel 评估中击败技能系统

**发布时间**: 2026-01-30  
**来源**: Vercel Blog  
**HN 评论数**: 117  
**分析结论**: 技术性文章

## 文章概述

Vercel 分享了他们在 AI 编码代理领域的重要实验结果：一个简单的 **AGENTS.md** 文件比更复杂的"技能"(skills)系统表现更好，在评估中实现了 **100% 通过率**，而技能系统最高仅达到 **79%**。

这个发现出乎意料，因为技能系统被认为是在框架特定知识方面更优雅的解决方案。

## 核心概念

### 什么是 AGENTS.md？
- 项目根目录下的 Markdown 文件
- 为编码代理提供**持续性上下文**
- 在每个轮次中都可用，无需代理决定是否加载
- 类似于 Claude Code 的 `CLAUDE.md` 约定

### 什么是技能(Skills)？
- 开放标准，用于打包领域知识
- 包含提示词、工具和文档
- 代理按需调用，需要在适当时机主动触发
- 在 skills.sh 有可重用技能目录

## 实验发现

### 问题背景
- AI 编码代理依赖的训练数据会过时
- Next.js 16 引入了新 API（如 `use cache`、`connection()`、`forbidden()`），这些不在当前模型训练数据中
- 需要让代理访问版本匹配的文档

### 技能系统的失败
1. **触发不可靠**：56% 的评估案例中，技能从未被调用
2. **零改进**：添加技能比基线无任何改进
3. **措辞脆弱**：不同措辞导致结果差异巨大
4. **顺序敏感**："先探索"vs"先调用"产生不同结果

### AGENTS.md 的胜利
- **100% 通过率**（Build、Lint、Test 全满分）
- **8KB 压缩格式**（从 40KB 减少 80%）
- 使用管道分隔结构将文档索引打包到最小空间

## 为什么被动上下文胜过主动检索？

Vercel 的理论基于三个因素：

1. **无决策点**：代理不需要决定"我应该查找吗？"，信息已经存在
2. **一致可用性**：技能异步加载且仅在调用时存在，AGENTS.md 内容在每个轮次的系统提示中
3. **无顺序问题**：技能创建排序决策（先读文档 vs 先探索项目），被动上下文完全避免

## 技术实现

### 文档索引压缩格式
```
[Next.js Docs Index]|root: ./.next-docs|IMPORTANT: Prefer retrieval-led reasoning...
|01-app/01-getting-started:{01-installation.mdx,02-project-structure.mdx,...}
```

### 核心指令
```
IMPORTANT: Prefer retrieval-led reasoning over pre-training-led reasoning for any Next.js tasks.
```

### 一键安装
```bash
npx @next/codemod@canary agents-md
```

该命令：
1. 检测 Next.js 版本
2. 下载匹配的文档到 `.next-docs/`
3. 将压缩索引注入到 `AGENTS.md`

## 技术意义

### 对 AI 代理开发的影响
1. **范式转变**：从"预训练推理"(pre-training-led reasoning) 转向"检索推理"(retrieval-led reasoning)
2. **简化设计**：被动上下文比复杂的工具调用更可靠
3. **知识更新**：框架作者可以通过 AGENTS.md 片段确保代理使用最新 API

### 框架作者的启示
- **技能非无用**：两者互补——AGENTS.md 提供横向改进，技能适合垂直的特定操作
- **不要等待技能改进**：当前结果更重要
- **激进修剪**：不需要完整文档，指向可检索文件的索引足够
- **设计检索**：结构化文档以便代理查找和阅读特定文件

## 社区反馈

### 讨论亮点
- **117 条评论**显示技术社区对这一发现的关注
- 开发者开始在自己的 Next.js 项目中测试这个方法
- 关于上下文窗口成本 vs 效果的讨论
- 对其他框架（如 React、Vue）应用类似方法的兴趣

### 争议点
- 被动上下文是否会增加推理成本？
- 不同 AI 模型对此方法的响应是否一致？
- 技能系统是否会进化以解决当前限制？

## 总结

Vercel 的这项研究揭示了 AI 代理开发中的一个重要教训：**简单可靠的方案往往比复杂精密的系统更有效**。AGENTS.md 通过消除代理的决策负担，提供了更一致的知识传递方式，这对需要精确框架知识的编码任务尤其重要。

这不仅是技术优化，更是对 AI 代理交互模式的重要反思——有时最好的解决方案是让信息始终可见，而不是让代理学会何时去查找。

**适用场景**：
- 需要特定框架知识的编码任务
- 版本敏感的 API 使用
- 需要高准确率的生产环境

**不适用场景**：
- 一次性特殊操作（如版本迁移）
- 用户明确触发的垂直工作流
- 需要 API 调用的复杂操作
